<!DOCTYPE html>
<html lang="ar">
  <head>
    <meta charset="UTF-8" />
    <title>Quiz</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        direction: rtl;
        background: #f4f4f4;
        padding: 20px;
      }
      .quiz-container {
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        max-width: 500px;
        margin: auto;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      button {
        background: #007bff;
        color: #fff;
        border: none;
        padding: 10px 15px;
        border-radius: 5px;
        cursor: pointer;
      }
      button:hover {
        background: #0056b3;
      }
    </style>
  </head>
  <body>
    <div class="quiz-container">
      <h2>اختبار سريع</h2>
      <label>اسم الطالب:</label>
      <input type="text" id="studentName" placeholder="اكتب اسمك" /><br /><br />

      <p>1. ما عاصمة مصر؟</p>
      <input type="radio" name="q1" value="0" /> الإسكندرية<br />
      <input type="radio" name="q1" value="1" /> القاهرة<br />
      <input type="radio" name="q1" value="0" /> الجيزة<br /><br />

      <p>2. 5 + 3 = ؟</p>
      <input type="radio" name="q2" value="0" /> 6<br />
      <input type="radio" name="q2" value="1" /> 8<br />
      <input type="radio" name="q2" value="0" /> 10<br /><br />

      <button onclick="submitQuiz()">إرسال</button>
      <p id="result"></p>
    </div>

    <script>
      const scriptURL =
        "https://script.google.com/macros/s/AKfycby1YWX8PKuwH-InhXn57_AwsAcYK5XrBVwICu_qLdyYFPdsmRWzHthR05ETYnrkknER/exec"; // حط لينك Google Apps Script هنا

      function submitQuiz() {
        let name = document.getElementById("studentName").value;
        if (!name) {
          alert("من فضلك اكتب اسمك");
          return;
        }

        let score = 0;
        let q1 = document.querySelector("input[name='q1']:checked");
        let q2 = document.querySelector("input[name='q2']:checked");

        if (q1) score += parseInt(q1.value);
        if (q2) score += parseInt(q2.value);

        // عرض النتيجة للطالب
        document.getElementById("result").innerText = `النتيجة: ${score} / 2`;

        // إرسال البيانات لـ Google Sheets
       fetch(scriptURL, {
  method: "POST",
  body: JSON.stringify({ name: name, score: score })
})
.then(res => res.json())
.then(data => {
  if (data.result === "duplicate") {
    document.getElementById("result").innerText =
      `⚠️ الاسم "${data.name}" موجود قبل كده.`;
  } else {
    document.getElementById("result").innerText =
      `✅ تم الحفظ: ${data.name} - ${data.score} / 2`;
  }
})
.catch(err => console.error("خطأ:", err));

    </script>
  </body>
</html>


